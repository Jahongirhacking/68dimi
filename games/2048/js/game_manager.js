var _0x4253=['prototype','isGameTerminated','farthest','over','3Vsbgwk','cellContent','forEach','reverse','won','grid','3181npMzbQ','mergedFrom','savePosition','cells','526947jXYuyD','1103714csaTtX','restart','buildTraversals','next','move','serialize','5144dFFfQg','findFarthestPosition','setup','1415uBzgXs','positionsEqual','clearGameState','score','inputManager','size','bind','1517332XDgXwH','storageManager','addStartTiles','addRandomTile','actuate','cellAvailable','insertTile','startTiles','setBestScore','1316830ACJIyF','value','553252HcQPIf','prepareTiles','131xumMyE','actuator','keepPlaying','randomAvailableCell','updatePosition','tileMatchesAvailable','setGameState','cellsAvailable','removeTile','moveTile','getBestScore','continueGame','eachCell'];var _0x1682=function(_0xce8829,_0x409514){_0xce8829=_0xce8829-0xab;var _0x425326=_0x4253[_0xce8829];return _0x425326;};var _0x3f0c29=_0x1682;(function(_0x129355,_0xfcd4aa){var _0x9d323f=_0x1682;while(!![]){try{var _0x5883e6=-parseInt(_0x9d323f(0xc2))*-parseInt(_0x9d323f(0xcc))+parseInt(_0x9d323f(0xd3))*-parseInt(_0x9d323f(0xb1))+-parseInt(_0x9d323f(0xad))+-parseInt(_0x9d323f(0xcd))+-parseInt(_0x9d323f(0xdd))+-parseInt(_0x9d323f(0xaf))+-parseInt(_0x9d323f(0xc8))*-parseInt(_0x9d323f(0xd6));if(_0x5883e6===_0xfcd4aa)break;else _0x129355['push'](_0x129355['shift']());}catch(_0x2fdcd7){_0x129355['push'](_0x129355['shift']());}}}(_0x4253,0xdfde4));function GameManager(_0x4bf02f,_0x193573,_0x547641,_0x54a4d8){var _0x3d6283=_0x1682;this[_0x3d6283(0xdb)]=_0x4bf02f,this[_0x3d6283(0xda)]=new _0x193573(),this[_0x3d6283(0xde)]=new _0x54a4d8(),this[_0x3d6283(0xb2)]=new _0x547641(),this[_0x3d6283(0xab)]=0x2,this['inputManager']['on']('move',this[_0x3d6283(0xd1)][_0x3d6283(0xdc)](this)),this['inputManager']['on'](_0x3d6283(0xce),this[_0x3d6283(0xce)][_0x3d6283(0xdc)](this)),this[_0x3d6283(0xda)]['on']('keepPlaying',this['keepPlaying']['bind'](this)),this[_0x3d6283(0xd5)]();}GameManager['prototype']['restart']=function(){var _0x3b3693=_0x1682;this['storageManager'][_0x3b3693(0xd8)](),this[_0x3b3693(0xb2)][_0x3b3693(0xbc)](),this['setup']();},GameManager['prototype']['keepPlaying']=function(){var _0x49ea48=_0x1682;this[_0x49ea48(0xb3)]=!![],this['actuator'][_0x49ea48(0xbc)]();},GameManager['prototype'][_0x3f0c29(0xbf)]=function(){var _0x5d890d=_0x3f0c29;return this[_0x5d890d(0xc1)]||this[_0x5d890d(0xc6)]&&!this['keepPlaying'];},GameManager[_0x3f0c29(0xbe)][_0x3f0c29(0xd5)]=function(){var _0x186c26=_0x3f0c29,_0x1aba1f=this[_0x186c26(0xde)]['getGameState']();_0x1aba1f?(this['grid']=new Grid(_0x1aba1f[_0x186c26(0xc7)]['size'],_0x1aba1f[_0x186c26(0xc7)][_0x186c26(0xcb)]),this[_0x186c26(0xd9)]=_0x1aba1f[_0x186c26(0xd9)],this['over']=_0x1aba1f[_0x186c26(0xc1)],this['won']=_0x1aba1f[_0x186c26(0xc6)],this['keepPlaying']=_0x1aba1f[_0x186c26(0xb3)]):(this[_0x186c26(0xc7)]=new Grid(this[_0x186c26(0xdb)]),this[_0x186c26(0xd9)]=0x0,this[_0x186c26(0xc1)]=![],this[_0x186c26(0xc6)]=![],this[_0x186c26(0xb3)]=![],this['addStartTiles']()),this['actuate']();},GameManager[_0x3f0c29(0xbe)][_0x3f0c29(0xdf)]=function(){var _0x5d6aa9=_0x3f0c29;for(var _0xcf5065=0x0;_0xcf5065<this[_0x5d6aa9(0xab)];_0xcf5065++){this[_0x5d6aa9(0xe0)]();}},GameManager[_0x3f0c29(0xbe)]['addRandomTile']=function(){var _0x495883=_0x3f0c29;if(this['grid'][_0x495883(0xb8)]()){var _0x275ea2=Math['random']()<0.9?0x2:0x4,_0x5623eb=new Tile(this[_0x495883(0xc7)][_0x495883(0xb4)](),_0x275ea2);this[_0x495883(0xc7)][_0x495883(0xe3)](_0x5623eb);}},GameManager[_0x3f0c29(0xbe)][_0x3f0c29(0xe1)]=function(){var _0x265d88=_0x3f0c29;this['storageManager'][_0x265d88(0xbb)]()<this['score']&&this[_0x265d88(0xde)][_0x265d88(0xac)](this['score']),this[_0x265d88(0xc1)]?this[_0x265d88(0xde)][_0x265d88(0xd8)]():this['storageManager'][_0x265d88(0xb7)](this['serialize']()),this[_0x265d88(0xb2)]['actuate'](this['grid'],{'score':this[_0x265d88(0xd9)],'over':this['over'],'won':this[_0x265d88(0xc6)],'bestScore':this[_0x265d88(0xde)][_0x265d88(0xbb)](),'terminated':this[_0x265d88(0xbf)]()});},GameManager['prototype'][_0x3f0c29(0xd2)]=function(){var _0xa32572=_0x3f0c29;return{'grid':this['grid'][_0xa32572(0xd2)](),'score':this[_0xa32572(0xd9)],'over':this[_0xa32572(0xc1)],'won':this[_0xa32572(0xc6)],'keepPlaying':this[_0xa32572(0xb3)]};},GameManager['prototype']['prepareTiles']=function(){var _0x17a36a=_0x3f0c29;this[_0x17a36a(0xc7)][_0x17a36a(0xbd)](function(_0x512a47,_0x1a801c,_0x48d75e){var _0x581776=_0x17a36a;_0x48d75e&&(_0x48d75e['mergedFrom']=null,_0x48d75e[_0x581776(0xca)]());});},GameManager[_0x3f0c29(0xbe)]['moveTile']=function(_0x2e12ed,_0x1dd21b){var _0x2cad32=_0x3f0c29;this['grid'][_0x2cad32(0xcb)][_0x2e12ed['x']][_0x2e12ed['y']]=null,this[_0x2cad32(0xc7)]['cells'][_0x1dd21b['x']][_0x1dd21b['y']]=_0x2e12ed,_0x2e12ed[_0x2cad32(0xb5)](_0x1dd21b);},GameManager[_0x3f0c29(0xbe)]['move']=function(_0x50fe97){var _0x11065f=_0x3f0c29,_0xd560aa=this;if(this[_0x11065f(0xbf)]())return;var _0xac56ac,_0x4e8e0d,_0x520731=this['getVector'](_0x50fe97),_0x1067c5=this[_0x11065f(0xcf)](_0x520731),_0x2b8f2c=![];this[_0x11065f(0xb0)](),_0x1067c5['x']['forEach'](function(_0x543327){var _0x3add75=_0x11065f;_0x1067c5['y'][_0x3add75(0xc4)](function(_0x47d70c){var _0x29053=_0x3add75;_0xac56ac={'x':_0x543327,'y':_0x47d70c},_0x4e8e0d=_0xd560aa['grid'][_0x29053(0xc3)](_0xac56ac);if(_0x4e8e0d){var _0x1afc90=_0xd560aa['findFarthestPosition'](_0xac56ac,_0x520731),_0x32f6b4=_0xd560aa[_0x29053(0xc7)][_0x29053(0xc3)](_0x1afc90[_0x29053(0xd0)]);if(_0x32f6b4&&_0x32f6b4[_0x29053(0xae)]===_0x4e8e0d[_0x29053(0xae)]&&!_0x32f6b4[_0x29053(0xc9)]){var _0x17b3d3=new Tile(_0x1afc90[_0x29053(0xd0)],_0x4e8e0d[_0x29053(0xae)]*0x2);_0x17b3d3[_0x29053(0xc9)]=[_0x4e8e0d,_0x32f6b4],_0xd560aa[_0x29053(0xc7)][_0x29053(0xe3)](_0x17b3d3),_0xd560aa[_0x29053(0xc7)][_0x29053(0xb9)](_0x4e8e0d),_0x4e8e0d[_0x29053(0xb5)](_0x1afc90[_0x29053(0xd0)]),_0xd560aa[_0x29053(0xd9)]+=_0x17b3d3[_0x29053(0xae)];if(_0x17b3d3[_0x29053(0xae)]===0x800)_0xd560aa['won']=!![];}else _0xd560aa[_0x29053(0xba)](_0x4e8e0d,_0x1afc90[_0x29053(0xc0)]);!_0xd560aa[_0x29053(0xd7)](_0xac56ac,_0x4e8e0d)&&(_0x2b8f2c=!![]);}});}),_0x2b8f2c&&(this['addRandomTile'](),!this['movesAvailable']()&&(this['over']=!![]),this[_0x11065f(0xe1)]());},GameManager[_0x3f0c29(0xbe)]['getVector']=function(_0x1ddd3e){var _0x38f1af={0x0:{'x':0x0,'y':-0x1},0x1:{'x':0x1,'y':0x0},0x2:{'x':0x0,'y':0x1},0x3:{'x':-0x1,'y':0x0}};return _0x38f1af[_0x1ddd3e];},GameManager[_0x3f0c29(0xbe)]['buildTraversals']=function(_0x42a8b6){var _0x3dc1af=_0x3f0c29,_0x579c96={'x':[],'y':[]};for(var _0x24e8ac=0x0;_0x24e8ac<this['size'];_0x24e8ac++){_0x579c96['x']['push'](_0x24e8ac),_0x579c96['y']['push'](_0x24e8ac);}if(_0x42a8b6['x']===0x1)_0x579c96['x']=_0x579c96['x'][_0x3dc1af(0xc5)]();if(_0x42a8b6['y']===0x1)_0x579c96['y']=_0x579c96['y'][_0x3dc1af(0xc5)]();return _0x579c96;},GameManager[_0x3f0c29(0xbe)][_0x3f0c29(0xd4)]=function(_0x593d0a,_0xc0d58f){var _0xd4c40a=_0x3f0c29,_0x30681f;do{_0x30681f=_0x593d0a,_0x593d0a={'x':_0x30681f['x']+_0xc0d58f['x'],'y':_0x30681f['y']+_0xc0d58f['y']};}while(this[_0xd4c40a(0xc7)]['withinBounds'](_0x593d0a)&&this[_0xd4c40a(0xc7)][_0xd4c40a(0xe2)](_0x593d0a));return{'farthest':_0x30681f,'next':_0x593d0a};},GameManager[_0x3f0c29(0xbe)]['movesAvailable']=function(){var _0x39feda=_0x3f0c29;return this[_0x39feda(0xc7)][_0x39feda(0xb8)]()||this[_0x39feda(0xb6)]();},GameManager['prototype'][_0x3f0c29(0xb6)]=function(){var _0x4f121d=_0x3f0c29,_0x46bc5e=this,_0x3a44a4;for(var _0x9df919=0x0;_0x9df919<this['size'];_0x9df919++){for(var _0x1941bc=0x0;_0x1941bc<this[_0x4f121d(0xdb)];_0x1941bc++){_0x3a44a4=this['grid'][_0x4f121d(0xc3)]({'x':_0x9df919,'y':_0x1941bc});if(_0x3a44a4)for(var _0x19ac00=0x0;_0x19ac00<0x4;_0x19ac00++){var _0x5a5192=_0x46bc5e['getVector'](_0x19ac00),_0x2daf9d={'x':_0x9df919+_0x5a5192['x'],'y':_0x1941bc+_0x5a5192['y']},_0x3b6110=_0x46bc5e[_0x4f121d(0xc7)][_0x4f121d(0xc3)](_0x2daf9d);if(_0x3b6110&&_0x3b6110[_0x4f121d(0xae)]===_0x3a44a4['value'])return!![];}}}return![];},GameManager[_0x3f0c29(0xbe)][_0x3f0c29(0xd7)]=function(_0x10d16d,_0x109ab3){return _0x10d16d['x']===_0x109ab3['x']&&_0x10d16d['y']===_0x109ab3['y'];};